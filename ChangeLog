2002-02-15 23:21  andy

	* bopm.conf.sample:

	bopm.conf.sample:
		Added docs and examples for EXCLUDE option.
	
2002-02-15 04:57  andy

	* Makefile.in, config.c, config.h, extern.h, irc.c, irc.h, match.c,
	match.h, scan.c:

	
	match.c, match.h:
	IRC wildcard matching functions from dancer-hybrid.  match()
	handles string matching and collapse() shortens a wildcard string
	as far as possible.
	
	config.h:
	Added new config type; TYPE_LIST.  Multiple parameters of this
	type are put into a linked list.
	
	Added missing config_memfail() prototype.
	
	config.c:
	Added new config option EXCLUDE.  This is a list of wildcard
	strings against which the host and IP address of connecting users
	will be matched.  A user which matches any entry will not be
	scanned.
	
	Makefile.in:
	Added new objects and dependencies for match.[cho]
	
	irc.c, irc.h:
	Added do_connect() function to avoid duplication.  This function
	checks the users host and IP address against the EXCLUDE list and
	provided there are no matches proceeds to do a DNSBL check and
	proxy scan.
	
	The above patch was contributed by Rob Levin/lilo @ OPN
	
2002-02-15 00:56  andy

	* Makefile.in, misc.c, opercmd.c, scan.c, stats.c:

	Makefile.in, misc.c, stats.c:
		Forogt to include the autoconfiscated header
	
	opercmd.c, scan.c:
		Small tidyup.
	
2002-02-14 05:56  andy

	* INSTALL, README:

	README:
		Updated mailing list info, credits, etc.
	INSTALL:
		Largely rewritten installation instructions and a blurb about
		TARGET_STRING
	
2002-02-14 05:17  andy

	* acconfig.h, configure, configure.in, irc.c, options.h,
	setup.h.in:

	configure.in, options.h:
		Added configure option --with-unreal to replace the UNREAL
		definition that was in options.h
	acconfig.h:
		Make autoheader work for --with-unreal
	irc.c:
		WITH_UNREAL instead of UNREAL
	
2002-02-14 05:06  andy

	* acconfig.h, configure, configure.in, setup.h.in:

	configure.in:
		Added support for --with-select configure option so that people
		can force use of select() whether they have poll() or not.
	acconfig.h:
		This makes autoheader work (which is used to make setup.h.in from
		configure.in) now that WITH_SELECT is added.
	
2002-02-14 01:51  andy

	* configure, configure.in, options.h, scan.c, setup.h.in:

	configure.in:
		Check for sys/poll.h
	options.h:
		We'll use poll() if sys/poll.h was found
	scan.c:
		Alter for autoconfiscated sys/poll.h check.
	
2002-02-13 23:52  andy

	* configure, configure.in, dnsbl.c, setup.h.in:

	configure.in:
		Add a check for bigendian systems.
	dnsbl.c:
		If we're on a bigendian system this'll be backwards.
	
2002-02-13 22:28  andy

	* Makefile.in, configure:

	OK, so we do need to distribute configure.
	
2002-02-13 22:15  strtok

	* scan.c, scan.h:

	Added byte counter to teach connection, and adjusted manual check output to be be more informative
	
2002-02-13 20:50  andy

	* bopchecker.c, irc.c, scan.c:

	bopchecker.c, irc.c, scan.c:
		Use AC_HEADER_TIME and AC_CHECK_HEADERS(sys/time.h) to check how to
		handle time.h and sys/time.h (if there even if a sys/time.h, if it
		can be included with time.h)
	
2002-02-13 20:32  andy

	* bopchecker.c:

	bopchecker.c:
		Another STDC_HEADERS check
	
2002-02-13 20:28  andy

	* config.c:

	config.c:
		Typo fix.
	
2002-02-13 20:26  andy

	* Makefile.in, config.c, dnsbl.c, irc.c, log.c, main.c, opercmd.c,
	scan.c:

	Makefile.in:
		Add a distclean target.  We may want to distribute the configure
		script at some point instead of just configure.in and expect people
		to use autoconf; we'll have to remember to change this then.
	
	config.c, dnsbl.c, irc.c, log.c, main.c, opercmd.c, scan.c:
		Take account of AC_HEADER_STDC check.
	
2002-02-13 20:12  andy

	* main.c:

	main.c:
		Handle AC_TYPE_SIGNAL check.
	
2002-02-13 19:58  andy

	* setup.h.in:

	setup.h.in:
		/me reads as far as "autoheader" in the autoconf manual.
	
2002-02-13 19:24  andy

	* Makefile, Makefile.in, configure.in, setup.h.in:

	First stab at autoconfiscation (euheue)
	
2002-02-13 16:51  andy

	* bopchecker.c:

	bopchecker.c:
		bopchecker needs a target string as well now.
	
2002-02-13 05:40  strtok

	* scan.c:

	Pad scan_struct->data + 1 byte on malloc to leave room for null terminator (was causing buffer overrun)
	
2002-02-12 23:02  andy

	* config.c:

	config.c:
		Really doesn't need to be that verbose :)
		Remember I use -d and -dd a lot when helping people set up BOPM -
		I really don't need 2 pages of config options flying by.
	
2002-02-12 21:42  strtok

	* version.h:

	VERSION for this release will be 2.0
	
2002-02-12 21:17  strtok

	* scan.c:

	Wingate write function now actually sends data
	
2002-02-12 21:07  strtok

	* scan.c, scan.h:

	Cleaned out code no longer needed
	
2002-02-12 20:57  strtok

	* bopm.conf.sample:

	Added TARGET_STRING to config file
	
2002-02-12 20:54  strtok

	* config.c, extern.h, options.h, scan.c, scan.h:

	No longer use individual read functions for each protocol, now search for
	a TARGET_STRING within the data. (set in conf)
	
2002-02-12 19:19  strtok

	* bopm.conf.sample, options.h, scan.c, scan.h:

	options.h USE_POLL and MAXPOLL for use of poll() as opposed to select() in
	          scan.c. If USE_POLL is defined, the scanner will use poll(), if not
	          select() is used as before
	
2002-02-12 06:10  strtok

	* bopm.conf.sample, config.c, extern.h, misc.c, scan.c, scan.h:

	bopm.conf.sample: Added config parameter FDLIMIT (default 512), which is maximum number
	    of file descriptors that can be open at any time (for scanning).
	config.c: Added -d debug output of set config parameters
	misc.c: Fixed bug involving clean()
	scan.c: Added scan_establish() code to socket()/connect() to a socket, connections
	        are now queued if the FDLIMIT cap is reached.
	
2002-02-10 15:37  andy

	* README:

	README:
		Credits for recent patches.
	
2002-02-10 15:25  andy

	* scan.c:

	scan.c:
		Improved HTTP handling.  Seems to work (have tested against all
		known HTTP false positives seen so far, plus 2 known open proxies).
		Ideas and pseudocode from jpayne@blitzed.org.
	
2002-02-10 14:34  andy

	* irc.c, irc.h, main.c:

	irc.c:
	irc.h:
		Added a MSGLEN #define so that networks which use different sized
		IRC buffers can be made to work easily.
	
	main.c:
		Changed umask to something more sensible.
	
	Both the above from shasta@irc.pl.
	
2002-02-07 17:23  andy

	* bopm.conf.sample, dnsbl.c:

	dnsbl.c:
		Need to check against DNSBL_ZONE with a dot on the end, because
		otherwise it will try the search domains in /etc/resolv.conf, and may
		even find a match!  Reported and fixed by asmodeus@irc.gr
	
	bopm.conf.sample:
		Gotcha about putting your own dot at the end of the zone.
	
2002-02-04 22:39  andy

	* bopchecker.c:

	bopchecker.c:
		Extra #include needed, reported by shasta@irc.pl
	
2002-02-04 18:12  andy

	* stats.c:

	stats.c:
		Added simple connects/minute reading.
	
2002-02-01 06:17  andy

	* ChangeLog:

	ChangeLog:
		Updated for next realese.
	
2002-02-01 06:16  andy

	* README:

	README:
		Added note about Unreal 3.2 support.
	
2002-02-01 05:57  andy

	* Makefile:

	Makefile:
		irc.o depends on options.h
	
2002-02-01 05:08  andy

	* README:

	README:
		Credits to locksmith for his help.
	
2002-02-01 04:40  andy

	* config.c:

	config.c:
		Possible stupid error with calculating size of config hash.
	
2002-01-31 06:00  strtok

	* irc.c:

	irc.c: Last commit had an odd paste from vim (???)
	
2002-01-31 05:38  strtok

	* config.c, irc.c, scan.h:

	config.c: Added FDLIMIT configuration parameter (limit of open file descriptors)
	irc.c: Fixed NULL CONF_NICKSERV_IDENT pointer (reported by uneks)
	scan.h: Added STATE_UNESTABLISHED
	
2002-01-30 23:55  andy

	* irc.c:

	irc.c:
		Some ircd's (Xnet and others?) don't send +c notices with the server as
		the source.
	
2002-01-29 17:33  andy

	* ChangeLog:

	ChangeLog:
		Updated for next release.
	
2002-01-29 17:31  andy

	* config.c:

	config.c:
		Now we've added a zero element on the config hash we need to adjust
		the sizes..
	
2002-01-29 01:49  strtok

	* README:

	README: Added codebase specific compatibility (those tested)
	
2002-01-29 01:46  andy

	* ChangeLog:

	ChangeLog:
		Missed a late commit.
	
2002-01-29 01:45  andy

	* bopm.conf.sample:

	bopm.conf.sample:
		Added suggestion from Sotiris Tsimbonis to make ti a bit more
		obvious that a temporary KLINE should be used.
	
2002-01-29 01:25  andy

	* ChangeLog:

	ChangeLog:
		Updated ChangeLog for 1.1 release.
	
2002-01-29 01:21  strtok

	* version.h:

	Version.h: Now 1.1
	
2002-01-29 00:23  andy

	* bopchecker.c, bopchecker.h, config.c:

	bopchecker.c:
		Some reorganisation.
	
		"req" field of config hash is now zero'd for all but the parameters
		we need for bopchecker to operate.
	
		Used a sleep(1) to reduce CPU usage.
	
	bopchecker.h:
		Exit values have changed again!  0 and 1 are already in use within
		bopm, so now 15-255 are reserved for bopchecker.
	
		HTTP    =  16
		WinGate =  32
		SOCKS4  =  64
		SOCKS5  = 128
	
	config.c:
		Terminated the config hash with a zero'd entry so that it is easy
		to tell where it ends.
	
2002-01-29 00:15  strtok

	* README, config.c:

	README: Added rehash instructions
	
2002-01-28 01:37  andy

	* README:

	README:
		Credits for PASSWORD option
	
2002-01-28 01:33  andy

	* bopm.conf.sample, config.c, extern.h, irc.c:

	config.c, extern.h:
		Add PASSWORD config option.
	irc.c:
		Use PASSWORD if supplied.
	bopm.conf.sample:
		Document PASSWORD, fix typo on SERVER
	
2002-01-28 00:18  strtok

	* config.c, config.h:

	config.c/config.h: BOPM now exits if 'required' configuration parameters
	are not set.
	
2002-01-27 14:17  andy

	* bopchecker.c, bopchecker.h:

	bopchecker.h:
		Added bitmasks for the types of proxy.  HTTP is 1, Wingate 2,
		SOCKS4 is 4 and SOCKS5 8.
	
	bopchecker.c:
		Now returns a bitmask of the types of proxies found back to the
		shell. THIS MEANS THAT VALUES > 1 MEAN A PROXY WAS FOUND AND 0
		MEANS NO PROXY WAS FOUND, THIS IS THE EXACT OPPOSITE TO PRIOR
		VERSIONS OF THIS PROGRAM!
	
2002-01-27 04:23  strtok

	* irc.c:

	irc.c: Fixed segfault if nickserv ident isnt defined in conf
	
2002-01-26 19:17  strtok

	* config.c:

	config.c: Replace C++ comment with C style comment (oops)
	
2002-01-25 22:58  andy

	* bopm.conf.sample:

	bopm.conf.sample:
		Remove Blitzed address because of people sending us reports without
	        contacting us.
	
2002-01-25 22:02  andy

	* scan.c:

	scan.c: Suggestion from Sotiris Tsimbonis that details go to channels
	
2002-01-25 21:14  andy

	* README, bopm.conf.sample, dnsbl.c:

	dnsbl.c: Allow reporting to multiple addresses
	README: Note about Sotiris Tsimbonis' idea
	bopm.conf.sample: Note about how to use multiple TO addresses
	
2002-01-25 15:27  andy

	* irc.c:

	irc.c: support & channels, bug found by Sotiris Tsimbonis <stsimb@irc.gr>.
	
2002-01-24 21:54  strtok

	* INSTALL:

	INSTALL: Updated INSTALL file to include information about options.h
	
2002-01-24 21:53  strtok

	* irc.c, options.h:

	irc.c/options.h: Added support for unreal ircds
	
2002-01-24 17:40  strtok

	* README:

	README: Added hybrid compatibility to README.
	
2002-01-24 10:41  andy

	* bopm.conf.sample, config.c, extern.h, irc.c:

	Added OPER_MODES config option to specify what modes the bopm will set on
	itself after opering up.
	
2002-01-24 06:56  andy

	* bopchecker.c:

	bopchecker needs to time out too, doh.
	
2002-01-24 06:18  andy

	* extern.h:

	Remove CONF_PING, a config option that never was.
	
2002-01-24 06:07  andy

	* INSTALL, README, bopchecker.c, extern.h, irc.c, main.c,
	options.h:

	Merged patch from Sotiris Tsimbonis <stsimb@irc.gr> with minor changes.
	Adds a -c command line argument which tells bopm to use a different name
	for log, pid and config files.  i.e. ./bopm -c myserver will use
	myserver.conf, myserver.log, myserver.pid.
	
	The patch also makes bopm set umode -h on itself after opering, in order
	to prevent the bot appearing in /stats p output (shows opers available to
	help).
	
	bopchecker now takes the -c option also, in the same way as bopm.
	
2002-01-23 04:58  strtok

	* ChangeLog:

	ChangeLog: It's 2002!
	
2002-01-22 21:44  strtok

	* bopm.conf.sample:

	bopm.conf.sample: Fixed typo
	
2002-01-22 19:09  strtok

	* ChangeLog:

	ChangeLog: Added changelog
	
